@using User.Authentication
@inherits LayoutComponentBase
@inject AuthenticationStateProvider authStateProvider
@inject NavigationManager nm


<PageTitle>FrontPage</PageTitle>

<div class="navbar">

    <main>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid ">
            <a class="navbar-brand text-white" aria-current="page" href="/">Academia</a>

               
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                 <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <AuthorizeView Roles="User">
            <Authorized>
               
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link  " aria-current="page" href="/">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " aria-current="page" href="form">Academic Info</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " aria-current="page" href="personalinformation">Personal Info</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " aria-current="page" href="/searchcity">Search City</a>
                        </li>
                    </ul>

                       </Authorized>

        </AuthorizeView>
         


                    <AuthorizeView>
                        <Authorized>
                            <a @onclick="logout" href="javascript:void(0)" class="btn btn-outline-success">LogOut</a>
                        </Authorized>
                        
                        <NotAuthorized>
                            <div  class="b">
                        <a href="login" class="btn btn-outline-success">Login/SignUp</a>

                    </div>

                        </NotAuthorized>
                    </AuthorizeView>


                </div>

            </div>
        </nav>







        <article class="content px-4">
            @Body
        </article>
    </main>
</div>

@code{

        private async Task logout ()
    {
        var customAuthStateProvider = (CustomAuthenticationStateProvider)authStateProvider;
        await customAuthStateProvider.UpdateAuthenticationState(null);
        nm.NavigateTo("/", true);
    }
}
}
                           